# gzh-cli-quality 제품 요구사항 문서 (PRD)

## 1. 제품 비전

### 1.1 핵심 가치 제안
**gzh-cli-quality**는 멀티 언어 코드 품질 도구 오케스트레이터로, 하나의 명령어로 Go, Python, JavaScript/TypeScript, Rust 프로젝트의 포매팅과 린팅을 통합 실행합니다.

### 1.2 해결하려는 문제
- **도구 파편화**: 각 언어마다 다른 포매터/린터 명령어와 옵션
- **비효율적 실행**: 순차 실행으로 인한 대기 시간 증가
- **일관성 부재**: 팀/프로젝트마다 다른 품질 기준
- **CI/CD 복잡성**: 여러 도구를 개별 설정해야 하는 파이프라인

### 1.3 제품 목표
1. **통합**: 11+ 품질 도구를 단일 CLI로 제공
2. **효율성**: 병렬 실행으로 처리 시간 단축
3. **Git 친화적**: 변경된 파일만 선택적 처리
4. **무설정 시작**: 자동 감지로 즉시 사용 가능

---

## 2. 타겟 사용자

### 2.1 페르소나 1: 개인 개발자
- **특징**: 멀티 언어 프로젝트 운영, 빠른 피드백 루프 필요
- **니즈**: 커밋 전 빠른 품질 검사, 간단한 명령어
- **사용 시나리오**: `gz-quality run --staged` 로 커밋할 파일만 검사

### 2.2 페르소나 2: 테크 리드
- **특징**: 팀 코드 품질 표준 관리, CI/CD 파이프라인 설계
- **니즈**: 일관된 품질 기준, 리포트 생성, 설정 공유
- **사용 시나리오**: `.gzquality.yml` 로 팀 표준 정의, PR 검사 자동화

### 2.3 페르소나 3: DevOps 엔지니어
- **특징**: 대규모 모노레포 관리, CI/CD 최적화
- **니즈**: 빠른 실행, 캐싱, 점진적 검사
- **사용 시나리오**: `gz-quality run --since main` 으로 변경분만 검사

---

## 3. 사용자 스토리

### 3.1 핵심 스토리

| ID | 사용자 | 스토리 | 우선순위 |
|----|--------|--------|----------|
| US-01 | 개발자 | 하나의 명령어로 모든 포매터와 린터를 실행하고 싶다 | P0 |
| US-02 | 개발자 | staged 파일만 빠르게 검사하고 싶다 | P0 |
| US-03 | 개발자 | 포매팅만 또는 린팅만 선택적으로 실행하고 싶다 | P0 |
| US-04 | 테크 리드 | 프로젝트 설정을 파일로 공유하고 싶다 | P1 |
| US-05 | 테크 리드 | JSON/HTML 리포트를 생성하고 싶다 | P1 |
| US-06 | DevOps | 특정 커밋 이후 변경된 파일만 검사하고 싶다 | P1 |
| US-07 | 개발자 | 필요한 도구를 자동으로 설치하고 싶다 | P2 |
| US-08 | 개발자 | 실행 전 계획(plan)을 미리 확인하고 싶다 | P2 |

### 3.2 수용 기준 예시 (US-01)
```
Given: Go, Python, JavaScript 파일이 있는 프로젝트
When: `gz-quality run` 실행
Then: 각 언어에 맞는 도구가 자동 감지되어 실행됨
And: 병렬 실행으로 처리 시간 최소화
And: 결과가 통합된 형식으로 출력됨
```

---

## 4. 핵심 기능

### 4.1 지원 언어 및 도구

| 언어 | 포매터 | 린터 |
|------|--------|------|
| Go | gofumpt, goimports | golangci-lint |
| Python | black | ruff, pylint |
| JavaScript/TypeScript | prettier | eslint, tsc |
| Rust | rustfmt, cargo-fmt | clippy |

### 4.2 CLI 명령어 구조

```
gz-quality                           # 도움말
gz-quality run                       # 전체 실행
gz-quality check                     # 린팅만 (변경 없이)
gz-quality init                      # 설정 파일 생성
gz-quality analyze                   # 프로젝트 분석
gz-quality tool <name>               # 개별 도구 실행
gz-quality install                   # 도구 설치
gz-quality upgrade                   # 도구 업그레이드
gz-quality version                   # 도구 버전 확인
gz-quality list                      # 사용 가능한 도구 목록
```

### 4.3 주요 옵션

| 옵션 | 설명 |
|------|------|
| `--staged` | Git staged 파일만 처리 |
| `--changed` | 변경된 모든 파일 처리 |
| `--since <ref>` | 특정 커밋 이후 변경 파일 |
| `--format-only` | 포매팅만 실행 |
| `--lint-only` | 린팅만 실행 |
| `--fix` | 자동 수정 적용 |
| `--dry-run` | 계획만 표시 |
| `--workers N` | 병렬 워커 수 |
| `--report <format>` | 리포트 생성 (json, html, markdown) |

---

## 5. 범위 정의

### 5.1 In-Scope (포함)
- Go, Python, JavaScript/TypeScript, Rust 언어 지원
- 11개 품질 도구 통합
- 병렬 실행 엔진
- Git 기반 점진적 처리
- YAML 설정 파일
- JSON/HTML/Markdown 리포트
- 도구 설치/업그레이드 관리

### 5.2 Out-of-Scope (제외)
- IDE 플러그인/확장
- 원격 도구 실행 (클라우드)
- 커스텀 도구 플러그인 시스템
- 실시간 파일 감시 (watch mode)
- 코드 커버리지 분석
- 보안 취약점 스캐닝 (별도 도구로 분리)

### 5.3 향후 고려 사항
- 추가 언어 지원 (Java, Kotlin, C/C++)
- 성능 캐싱 시스템
- 원격 설정 동기화
- GitHub/GitLab PR 통합

---

## 6. 경쟁 제품 비교

| 기능 | gzh-cli-quality | pre-commit | trunk | super-linter |
|------|-----------------|------------|-------|--------------|
| 멀티 언어 | O (4개) | O | O | O |
| 병렬 실행 | O | X | O | O |
| Git 통합 | O (native) | O (hooks) | O | X |
| 설정 복잡도 | 낮음 | 중간 | 중간 | 높음 |
| CI 친화성 | 높음 | 중간 | 높음 | 높음 |
| 리포트 생성 | O | X | O | O |
| 자동 도구 설치 | O | O | O | Docker 기반 |

### 6.1 차별점
1. **경량화**: Docker 불필요, 네이티브 Go 바이너리
2. **Git 네이티브**: 커밋/브랜치 기반 점진적 처리
3. **제로 설정**: 자동 감지로 즉시 사용
4. **통합 리포트**: 언어 간 일관된 이슈 형식

---

## 7. 성공 지표

### 7.1 사용성 지표
- 첫 실행까지 걸리는 시간 < 30초 (설치 후)
- 설정 파일 없이 기본 기능 사용 가능

### 7.2 성능 지표
- 개별 도구 순차 실행 대비 50% 이상 시간 단축
- 100+ 파일 프로젝트에서 10초 내 완료 (변경 파일 기준)

### 7.3 채택 지표
- 팀 내 품질 검사 일관성 향상
- CI/CD 파이프라인 설정 간소화

---

## 8. 기술 제약사항

### 8.1 런타임 요구사항
- Go 1.24.0 이상
- Git 2.0 이상
- 지원 OS: Linux, macOS, Windows

### 8.2 도구 의존성
- 각 언어별 품질 도구는 시스템에 설치되어 있어야 함
- `gz-quality install` 로 자동 설치 지원

---

## 9. 릴리스 계획

### 9.1 v1.0.0 (MVP)
- 핵심 명령어: run, check, init
- Go, Python, JavaScript 도구 지원
- 기본 병렬 실행
- JSON 리포트

### 9.2 v1.1.0
- Rust 도구 지원
- HTML/Markdown 리포트
- 도구 설치/업그레이드

### 9.3 v1.2.0
- 성능 최적화
- 캐싱 시스템
- CI/CD 통합 가이드

---

*최종 수정: 2025-11-27*
