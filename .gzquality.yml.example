# gzh-cli-quality Configuration Example
# Copy this file to .gzquality.yml to customize your project's quality tools

# Global Settings
# ===============

# Number of parallel workers for tool execution (default: CPU cores)
default_workers: 4

# Global timeout for tool execution (duration format: 10m, 30s, 1h)
timeout: "10m"

# Tools Configuration
# ===================
# Configure individual quality tools
# Each tool supports: enabled, priority, config_file, args, env

tools:
  # Go Tools
  # --------

  gofumpt:
    enabled: true
    priority: 10  # Higher priority = runs earlier
    args:
      - "-l"     # List files that need formatting
      - "-w"     # Write result to source file
    # config_file: ".gofumpt.yml"  # Optional custom config
    # env:
    #   GOFUMPT_SPLIT_LONG_LINES: "on"

  goimports:
    enabled: true
    priority: 9
    args:
      - "-local"
      - "github.com/Gizzahub"  # Organize imports with local prefix
    # env:
    #   GOIMPORTS_LOCAL: "github.com/yourorg"

  golangci-lint:
    enabled: true
    priority: 5
    config_file: ".golangci.yml"  # Use project's golangci-lint config
    args:
      - "--timeout=5m"
      - "--max-issues-per-linter=50"
      - "--max-same-issues=3"
    # env:
    #   GOLANGCI_LINT_CACHE: ".golangci-cache"

  # Python Tools
  # ------------

  black:
    enabled: true
    priority: 10
    args:
      - "--line-length=100"
      - "--target-version=py312"
    # config_file: "pyproject.toml"
    # env:
    #   BLACK_CACHE_DIR: ".black-cache"

  ruff:
    enabled: true
    priority: 7
    args:
      - "--fix"           # Auto-fix issues
      - "--show-fixes"    # Show what was fixed
    config_file: "pyproject.toml"
    # env:
    #   RUFF_CACHE_DIR: ".ruff-cache"

  pylint:
    enabled: false  # Disabled by default (ruff covers most cases)
    priority: 5
    args:
      - "--max-line-length=100"
      - "--disable=C0111"  # Missing docstring
    # config_file: ".pylintrc"

  # JavaScript/TypeScript Tools
  # ---------------------------

  prettier:
    enabled: true
    priority: 10
    args:
      - "--write"
      - "--print-width=100"
      - "--single-quote"
      - "--trailing-comma=es5"
    config_file: ".prettierrc"
    # env:
    #   PRETTIER_CACHE: ".prettier-cache"

  eslint:
    enabled: true
    priority: 5
    args:
      - "--fix"
      - "--max-warnings=0"
    config_file: ".eslintrc.json"
    # env:
    #   ESLINT_USE_FLAT_CONFIG: "false"

  tsc:
    enabled: true
    priority: 3
    args:
      - "--noEmit"        # Type-check only, don't output
      - "--skipLibCheck"  # Skip type checking of declaration files
    config_file: "tsconfig.json"

  # Rust Tools
  # ----------

  rustfmt:
    enabled: true
    priority: 10
    config_file: "rustfmt.toml"
    # args:
    #   - "--edition=2024"

  clippy:
    enabled: true
    priority: 5
    args:
      - "--"
      - "-D"
      - "warnings"  # Treat warnings as errors
    # env:
    #   CLIPPY_DISABLE_DOCS_LINKS: "true"

  cargo-fmt:
    enabled: true
    priority: 9
    args:
      - "--"
      - "--check"  # Check formatting without modifying files

# Language Configuration
# ======================
# Configure language-specific settings

languages:
  Go:
    enabled: true
    preferred_tools:
      - gofumpt
      - goimports
      - golangci-lint
    extensions:
      - .go

  Python:
    enabled: true
    preferred_tools:
      - black
      - ruff
      # - pylint  # Uncomment if you want pylint
    extensions:
      - .py
      - .pyi

  JavaScript:
    enabled: true
    preferred_tools:
      - prettier
      - eslint
    extensions:
      - .js
      - .jsx
      - .mjs
      - .cjs

  TypeScript:
    enabled: true
    preferred_tools:
      - prettier
      - eslint
      - tsc
    extensions:
      - .ts
      - .tsx
      - .mts
      - .cts

  Rust:
    enabled: true
    preferred_tools:
      - rustfmt
      - clippy
      - cargo-fmt
    extensions:
      - .rs

# File Patterns
# =============

# Exclude patterns (glob format)
exclude:
  # Dependencies
  - "node_modules/**"
  - "vendor/**"
  - ".venv/**"
  - "venv/**"
  - "__pycache__/**"

  # Version control
  - ".git/**"
  - ".svn/**"

  # Build outputs
  - "dist/**"
  - "build/**"
  - "target/**"
  - "out/**"
  - ".next/**"

  # Minified files
  - "**/*.min.js"
  - "**/*.min.css"
  - "**/*.bundle.js"

  # Generated files
  - "**/*.generated.*"
  - "**/generated/**"
  - "**/*_pb.go"      # Protocol buffer generated
  - "**/*_pb.py"

  # Test fixtures
  - "**/testdata/**"
  - "**/fixtures/**"

  # IDE and editor
  - ".idea/**"
  - ".vscode/**"
  - "*.swp"
  - "*.swo"
  - "*~"

# Include patterns (optional, overrides exclude)
# include:
#   - "src/**/*.ts"
#   - "lib/**/*.go"

# ========================================
# Common Configuration Examples
# ========================================

# Example 1: Strict Mode (Maximum Quality Checks)
# ------------------------------------------------
# Uncomment to enable strict mode for all tools
#
# tools:
#   golangci-lint:
#     args:
#       - "--enable-all"
#       - "--disable=exhaustivestruct,exhaustruct"
#   ruff:
#     args:
#       - "--select=ALL"
#       - "--fix"
#   eslint:
#     args:
#       - "--fix"
#       - "--max-warnings=0"
#   clippy:
#     args:
#       - "--"
#       - "-W"
#       - "clippy::all"
#       - "-W"
#       - "clippy::pedantic"

# Example 2: Fast Mode (Quick Checks Only)
# -----------------------------------------
# Uncomment to run only formatters (skip linters)
#
# tools:
#   golangci-lint:
#     enabled: false
#   ruff:
#     enabled: false
#   eslint:
#     enabled: false
#   clippy:
#     enabled: false

# Example 3: Pre-commit Hook Configuration
# -----------------------------------------
# Optimized for fast pre-commit checks on staged files
# Usage: gz-quality run --staged --format-only
#
# default_workers: 8  # Use more workers for faster execution
# timeout: "2m"       # Shorter timeout for quick feedback

# Example 4: CI/CD Configuration
# -------------------------------
# Optimized for comprehensive CI/CD checks
# Usage: gz-quality check --since main
#
# default_workers: 4
# timeout: "15m"
# tools:
#   golangci-lint:
#     args:
#       - "--out-format=github-actions"
#   ruff:
#     args:
#       - "--format=github"

# Example 5: Monorepo Configuration
# ----------------------------------
# Different settings for different parts of monorepo
# Use multiple config files: .gzquality-backend.yml, .gzquality-frontend.yml
#
# Backend (Go/Python):
#   languages:
#     Go: {enabled: true}
#     Python: {enabled: true}
#     JavaScript: {enabled: false}
#     TypeScript: {enabled: false}
#
# Frontend (TS/JS):
#   languages:
#     Go: {enabled: false}
#     Python: {enabled: false}
#     JavaScript: {enabled: true}
#     TypeScript: {enabled: true}

# ========================================
# Tips and Best Practices
# ========================================
#
# 1. Start with defaults:
#    - Run `gz-quality init` to generate a basic config
#    - Customize gradually based on your needs
#
# 2. Priority values:
#    - 10: Formatters (run first, fix syntax)
#    - 5-7: Linters (run after formatting)
#    - 1-3: Type checkers (run last, most expensive)
#
# 3. Tool order matters:
#    - Format before lint (avoid formatting conflicts)
#    - Run fast tools before slow ones
#
# 4. Exclude wisely:
#    - Exclude generated code and dependencies
#    - Use specific patterns to avoid over-exclusion
#
# 5. Use config files:
#    - Keep tool-specific settings in their own config files
#    - Reference them here for consistency
#
# 6. Test your config:
#    - Use `gz-quality run --dry-run` to preview
#    - Check tool selection with `gz-quality analyze`
#
# 7. Team collaboration:
#    - Commit .gzquality.yml to version control
#    - Document any custom settings in comments
#    - Keep tool versions consistent across team
#
# ========================================
# For more information:
# - Documentation: https://github.com/Gizzahub/gzh-cli-quality/tree/master/docs
# - Examples: https://github.com/Gizzahub/gzh-cli-quality/tree/master/docs/user/02-examples.md
# - Config Guide: https://github.com/Gizzahub/gzh-cli-quality/tree/master/docs/user/03-configuration.md
